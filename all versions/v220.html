<!DOCTYPE html>
<html>
  <head>
    <title>Best game ever (v2.2.0)</title>
    <style>
      html, button {
        font-size: 50px;
        text-align: center;
        font-family: sans-serif;
      }
      .top-bar{
        width: 25%;
      }
    </style>
  </head>
  <body>
    <button class="top-bar" onclick="screennum=0">Points</button><button class="top-bar" onclick="screennum=1">Upgrades</button><button class="top-bar" onclick="screennum=2">Options</button><button class="top-bar" onclick="screennum=3">Achievements</button><br><br>
    <span id="points"></span>
    <span id="metapoints"></span>
    <span id="metametapoints"></span>
    <span id="getpoint"><button onclick="addpoint()">Get point</button></span><br>
    <span id="getmeta"><button onclick="addmeta()">Get 10 points to get metapoints</button></span><br>
    <span id="getmetameta"><button onclick="addmetameta()">Get 10 metapoints to get metametapoints</button></span>
    <script>
      var screennum=0;
      var lastscreennum=1;
      var points=0;
      var lastpoints=10;
      var metapoints=0;
      var lastmetapoints=10;
      var metametapoints=0;
      if (localStorage.getItem("points220")){
        points=Number(localStorage.getItem("points220"));
      }
      if (localStorage.getItem("metapoints220")){
        metapoints=Number(localStorage.getItem("metapoints220"));
      }
      if (localStorage.getItem("metametapoints220")){
        metapoints=Number(localStorage.getItem("metametapoints220"));
      }
      function check(){
        if ((points<10 && lastpoints>=10)||(points<10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("getmeta").innerHTML="<button onclick='getmeta()'>Get 10 points to reset</button>";
        } else if ((points>=10 && lastpoints<10)||(points>=10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("getmeta").innerHTML="<button onclick='getmeta()'>Reset for metapoints</button>";
        }
        if ((metapoints<10 && lastmetapoints>=10)||(metapoints<10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("getmetameta").innerHTML="<button onclick='getmetameta()'>Get 10 metapoints to reset</button>";
        } else if ((metapoints>=10 && lastmetapoints<10)||(metapoints>=10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("getmetameta").innerHTML="<button onclick='getmetameta()'>Reset for metametapoints</button>";
        }
        if (screennum==0){
          document.getElementById("points").innerHTML="Points: "+points+"<br>";
          document.getElementById("metapoints").innerHTML="Metapoints: "+metapoints+"<br>";
          document.getElementById("metametapoints").innerHTML="Metametapoints: "+metametapoints+"<br><br>";
        }
        if (screennum==0 && lastscreennum!=0){
          document.getElementById("getpoint").innerHTML="<button onclick='addpoint()'>Get point</button>";
        } else if (screennum!=0 && lastscreennum!=screennum) {
          document.getElementById("points").innerHTML="";
          document.getElementById("metapoints").innerHTML="";
          document.getElementById("getpoint").innerHTML="";
        }
        lastpoints=points;
        lastmetapoints=metapoints;
        lastscreennum=screennum;
      }
      function addpoint(){
        points+=Math.ceil(1+metapoints/2);
      }
      function getmeta(){
        if (points>=10){
          metapoints+=Math.floor(points/10)*Math.floor(metametapoints/2+1);
          points=0;
        }
      }
      function getmetameta(){
        if (metapoints>=10){
          metametapoints+=Math.floor(metapoints/10);
          points=0;
          metapoints=0;
        }
      }
      function reset(){
        points=0;
        metapoints=0;
      }
      function save(){
        localStorage.setItem("points220",points.toString());
        localStorage.setItem("metapoints220",metapoints.toString());
      }
      setInterval(save,1000);
      setInterval(check,50);
    </script>
  </body>
</html>
