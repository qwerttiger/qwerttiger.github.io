<!DOCTYPE html>
<html>
  <head>
    <title>Pretty meh quality game</title>
    <style>
      html, button {
        font-size: 50px;
        text-align: center;
        font-family: sans-serif;
      }
      .top-bar{
        width: 25%;
      }
    </style>
  </head>
  <body>
    <button class="top-bar" onclick="screennum=0">Points</button><button class="top-bar" onclick="screennum=1">Upgrades</button><button class="top-bar" onclick="screennum=2">Options</button><button class="top-bar" onclick="screennum=3">Achievements</button><br><br>
    <span id="points"></span>
    <span id="metapoints"></span>
    <span id="getpoint"><button onclick="addpoint()">Get point</button></span><br>
    <span id="reset"><button onclick="reset()">Get 10 points to reset</button></span>
    <script>
      var screennum=0;
      var lastscreennum=1;
      var points=0;
      var lastpoints=10;
      var metapoints=0;
      if (localStorage.getItem("points202")){
        points=Number(localStorage.getItem("points202"));
      }
      if (localStorage.getItem("metapoints202")){
        metapoints=Number(localStorage.getItem("metapoints202"));
      }
      function check(){
        if ((points<10 && lastpoints>=10)||(points<10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("reset").innerHTML="<button onclick='reset()'>Get 10 points to reset</button>";
        } else if ((points>=10 && lastpoints<10)||(points>=10 && screennum==0 && lastscreennum!=0)){
          document.getElementById("reset").innerHTML="<button onclick='reset()'>Reset for a metapoint</button>";
        }
        if (screennum==0){
          document.getElementById("points").innerHTML="Points: "+points+"<br>";
          document.getElementById("metapoints").innerHTML="Metapoints: "+metapoints+"<br><br>";
        }
        if (screennum==0 && lastscreennum!=0){
          document.getElementById("getpoint").innerHTML="<button onclick='addpoint()'>Get point</button>";
        } else if (screennum!=0 && lastscreennum!=screennum) {
          document.getElementById("points").innerHTML="";
          document.getElementById("metapoints").innerHTML="";
          document.getElementById("getpoint").innerHTML="";
          document.getElementById("reset").innerHTML="";
        }
        lastpoints=points;
        lastscreennum=screennum;
      }
      function addpoint(){
        points+=Math.ceil(1+metapoints/2);
      }
      function reset(){
        if (points>=10){
          metapoints+=Math.floor(points/10);
          points=0;
        }
      }
      function clear(){
        points=0;
        metapoints=0;
      }
      function save(){
        localStorage.setItem("points202",points.toString());
        localStorage.setItem("metapoints202",metapoints.toString());
      }
      setInterval(save,1000);
      setInterval(check,50);
    </script>
  </body>
</html>
